<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="css/welcome.css">
  <link rel="icon" href="images/wallet_icon.ico">
  <title>CryptoWallet</title>
</head>

<body>
  <div class="row">
    <div class="col-sm-9 left">
      <div class="jumbotron jumbotron-fluid">
        <div class="container">
          <img src="images/logo_wallet.png" height="150px" width="150px" alt="logo">
          <h1 class="display-4">Welcome to <span class="crypto">Crypto</span>Wallet!</h1>
          <p class="lead">The only piece of software you need to manage your <span class="crypto">crypto</span>currencies!</p>
        </div>
      </div>
      <hr>
      <div class="row mid-row">
        <div class="carousel slide shadow" data-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img src="images/crypto1.jpg" class="d-block w-100" alt="...">
              <div class="carousel-caption d-none d-md-block">
                <h5>FAST</h5>
                <p>Transactions are almost instant!</p>
              </div>
            </div>

            <div class="carousel-item">
              <img src="images/crypto2.jpg" class="d-block w-100" alt="...">
              <div class="carousel-caption d-none d-md-block">
                <h5>CONVENIENT</h5>
                <p>User-friendly interface and pretty design!</p>
              </div>
            </div>

            <div class="carousel-item">
              <img src="images/crypto3.jpg" class="d-block w-100" alt="...">
              <div class="carousel-caption d-none d-md-block">
                <h5>SECURE</h5>
                <p>Your sensitive data is under our top level security!</p>
              </div>
            </div>
          </div>
        </div>
      </div>




    </div>



    <div class="col-sm-3 right">
      <h1 style="color:white">Get Started</h1>
      <button type="button" class="btn btn-light login-btn border border-dark">Log In</button>
      <form action="/login" class="login-form" method="POST" >
        <div class="form-group">
          <svg class="bi bi-person-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
          </svg>
          <input type="text" name="account" class="form-control input-field" placeholder="username" autocomplete="off" required="required">
        </div>
        <div class="form-group">
          <svg class="bi bi-lock-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <rect width="11" height="9" x="2.5" y="7" rx="2" />
            <path fill-rule="evenodd" d="M4.5 4a3.5 3.5 0 117 0v3h-1V4a2.5 2.5 0 00-5 0v3h-1V4z" clip-rule="evenodd" />
          </svg>
          <input type="password" name="password" class="form-control input-field" placeholder="password" required="required">
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
      <button type="button" class="btn btn-light create-btn border border-dark">Create Wallet</button>

      <form action="/new_account" class="create-form" method="POST" >
        <div class="form-group">
          <svg class="bi bi-person-fill" id="newUsernameIcon" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
          </svg>
          <input type="text" id="newUsername" name="newUsername" class="form-control input-field" placeholder="username" autocomplete="off" required="required">
          <p id="newUsernameError" style="display:none; color: red; font-weight: bold">This username already exists!</p>
        </div>
        <div class="form-group">
          <svg class="bi bi-unlock-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M.5 9a2 2 0 012-2h7a2 2 0 012 2v5a2 2 0 01-2 2h-7a2 2 0 01-2-2V9z" />
            <path fill-rule="evenodd" d="M8.5 4a3.5 3.5 0 117 0v3h-1V4a2.5 2.5 0 00-5 0v3h-1V4z" clip-rule="evenodd" />
          </svg>
          <input type="password" name="newPassword" class="form-control input-field pass" placeholder="password" required="required">
        </div>
        <div class="form-group">
          <svg class="bi bi-lock-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <rect width="11" height="9" x="2.5" y="7" rx="2" />
            <path fill-rule="evenodd" d="M4.5 4a3.5 3.5 0 117 0v3h-1V4a2.5 2.5 0 00-5 0v3h-1V4z" clip-rule="evenodd" />
          </svg>
          <input type="password" name="confirmNewPassword" class="form-control input-field confirm-pass" placeholder="confirm password" required="required">
        </div>
        <button type="submit" class="btn btn-primary create-submit-btn" disabled>Submit</button>
      </form>
      <%if (loginError) {%>
        <p style="color: red; font-weight: bold;"><%= loginError %></p>
      <%}%>
    </div>
  </div>

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.0.js" integrity="sha256-r/AaFHrszJtwpe+tHyNi/XCfMxYpbsRg2Uqn0x3s2zc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  <script src="scripts/welcome.js" charset="utf-8"></script>
  <script>
    const newUsernameElement = document.getElementById('newUsername');
    const newUsernameIcon = $('#newUsernameIcon');
    const newUsernameError = $('#newUsernameError');
    function throttle(func, delay) {
      let timeout = null
      return function(...args) {
        if (!timeout) {
          timeout = setTimeout(() => {
            func.call(this, ...args)
            timeout = null
          }, delay)
        }
      }
    }
    const inputListener = (event) => {
      const username = event.target.value;
      
      if (username.length) {
        $.get(`/username/${username}/check`)
        .done(() => {
          newUsernameError.show();
          newUsernameIcon.css('fill', 'red');
          $('.create-submit-btn').prop('disabled', true);
        }).fail(() => {
          newUsernameError.hide();
          newUsernameIcon.css('fill', 'green');
        });
      } else {
        newUsernameError.hide();
        newUsernameIcon.css('fill', 'black');
        $('.create-submit-btn').prop('disabled', true);
      }
    }
    newUsernameElement.addEventListener('input', throttle(inputListener, 600));
  </script>
</body>

</html>
